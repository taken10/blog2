Title: サマーインターンシップ2018実施報告
<br>
Date: 2018-09-25 09:00
<br>
Category: report
<br>
# Java未経験による、はじめてのSpring Boot開発
2018年9月27日（木）に1Dayインターンシップとして、**『 ディープラーニングを使用したAIチャットボット体験！ 』**を開催しました。
<br>
5名の学生さんに参加してもらいました。ありがとうございました！
<br>
今回は、実施したインターンシップの内容を報告します。
<br>
# 目次
* [研修概要](#overview)
* [1. 自己紹介](#1.)
 * [1.1. 経歴](#1.1.)
* [2. 研修について](#2.)

 * [2.1. 研修内容](#2.1.)
 * [2.2. Spring](#2.2.)
     * [2.2.1. Webアプリケーションの概要](#2.2.1.)
     * [2.2.2. 使用したSpringのツールや機能](#2.2.2.)
 * [2.3. MyBatis](#2.3.)
     * [2.3.1. MyBatisとは](#2.3.1.)
     * [2.3.2. MyBatisの特徴](#2.3.2.)
     * [2.3.3. MyBatisの導入](#2.3.3.)
 * [2.4. セッション管理](#2.4.)
* [3. まとめ](#3.)

# <a name="overview"></a>
## 研修概要
2018年8月に中途入社しました辻と申します
<br>

==**研修の流れ**==
>1.<br>
>2.<br>
>3.<br>

# <a name="1."></a>
## 1. 自己紹介
# <a name="1.1."></a>
### 1.1. 経歴
はじめに私の経歴を簡単にではありますが書かせていただきます。<br><br>
私は前職もm/fieldと同じITの会社に勤めていました。<br>
その会社ではプログラムのテストを行う仕事をしており、作成されたプログラムが正しく動くか確認したり、変更された画面がちゃんと表示されているかのチェックなどを行っていました。<br>
その仕事では全くプログラミングに触れる機会はなく、使っているツールもExcelとWordでした。<br>
そういった状況でせっかくIT業界にいるのにずっとテストばかりしても将来的に活かせるところは限られるだろうと考えるようになりました。<br>
そこからもっとプログラミングを使用した開発に携わりたい、将来的に活かせる技術を身につけたいと思い立ち前社を退職し、2018年8月にM-fieldに入社することとなりました。<br>
転職を決意してからいろいろな会社を探している中で、知り合いがm/fieldに在籍しており自分が転職するということを聞きm/fieldを紹介してくれました。<br>
そして紹介を受けてからm/fieldのことを知り合いに聞いたり自分で調べる中で、未経験者に対してのしっかりとした研修制度、在籍している方々の人柄の良さや会社の将来性などいろいろと知りm/fieldに転職する事を決意しました。<br>
特に前社でほぼプログラミングに触れていない自分が開発の現場で仕事ができるのかというところが何より不安に思っていたので、研修制度がしっかりしているところが入社の決め手になりました。<br>
次の項目から上記の通りほぼ未経験の自分がm/fieldに入社してから実際に行った研修の内容をご紹介していきます。

---
# <a name="2."></a>
## 2. 研修について
私がM-fieldに入社してから2か月間の研修を受け、最終的に研修の最終課題でJavaを使ったアプリケーションを作成しました。<br>
その作成までの研修内容と作成したアプリケーションについてご紹介します。
<br><br>

研修は以下の内容で実施しました。
<br>

==**研修実施内容**==
>1.XXXXX<br>
>2.XXXXX<br>
>3.XXXXX<br>
>4.XXXXX<br>
>5.XXXXX<br>
>6.XXXXX<br>

<br>
# <a name="2.1."></a>
### 2.1. 研修内容
XXXXX<br>
XXXXX<br>
XXXXX<br>
<br><br>

今回はSpring研修で学んだ内容を記します。
<br>
# <a name="2.2."></a>
### 2.2. Spring
# <a name="2.2.1."></a>
#### 2.2.1. Webアプリケーションの概要<br>
**「Springフレームワーク」**を使用して掲示板サイトを作成しました。<br>

以下作成した課題の概要です。<br><br>
▶掲示板サイトとしての主な機能<br>
>機能<br>
・ユーザーのログイン・ログアウト機能<br>
（ログインの時に一般ユーザーか管理者か判別する）<br>
・新規ユーザー登録<br>
・スレッド作成・削除<br>
・メッセージの投稿<br>
・ユーザーのブラックリスト登録・削除<br>

>非機能<br>
・セッション管理<br>

▶画面遷移図
<img src="img/display.jpg">
<br><br>


▶データ定義（データベースの構成）<br>


>データベースのテーブルは全4テーブル<br>
①membersテーブル - 全ユーザーのデータ<br>
②blacklistテーブル - ブラックリストに登録されたユーザーのデータ<br>
③threadsテーブル - 全スレッドのデータ<br>
④messageデータ - 全メッセージ（投稿）のデータ<br><br>
<img src="img/db.jpg"><br>

# <a name="2.2.2."></a>
#### 2.2.2. 使用したSpringのツールや機能<br>

・STSを使用したプロジェクト作成<br>
今回はeclipseのSpringに特化した開発ツールである「Spring Tool Suite(STS)」を使用して作成しました。<br><br>
・STSでのプロジェクト作成<br>
まず新規にプロジェクトを作成します。<br>
新規→Springスターター・プロジェクト<br>
<img src="img/newfile.jpg"><br>


・Thymeleaf<br>
次に**「Thymeleaf<sup>[1](#note1)</sup>」**というテンプレートエンジンを使用するためにMavenのライブラリ管理ファイルである**「pom.xml」**の<dependencies\>タグ内に下記の記述を追加します。<br>


<sup><a name="note1">1</a></sup>
XML/XHTML/HTML5で書かれたテンプレートを変換して、アプリケーションのデータやテキストを表示することができる。Thymeleaf用のタグを使用することでWebサーバから受け取ったデータを埋め込んだり、事前定義された処理を追加して動的なページが作成できる。
<img src="img/thymeleaf_pom.jpg"><br>
<br><br>
そしてhtmlファイルを以下のように配置します。<br>
<img src="img/htmllist.JPG"><br>

実装したコードは以下になります。
<br><br>

**<message.html>**<br>
<img src="img/message_thymeleaf.jpg"><br><br>
>・上記コードの処理説明<br>
**th:each、th:textタグ**を使用することでJava側から渡された値をページに表示させることができる。（選択したスレッドのメッセージ、投稿者等を表示することができる）<br><br>

**<threadlist.html>**<br>
<img src="img/thread_thymeleaf.jpg"><br><br>
>・上記コードの処理説明<br>
**th:ifタグ**を使用することで管理者か否かを条件分岐としてth:ifタグ以下の部分(spanタグに囲まれた部分)の表示・非表示を切り替えられる。
<br><br>

・MVC
<br>
MVCはModel / View / Controllerを表しておりアプリケーションソフトウェアを実装するためのデザインパターンになります。<br>
それぞれ役割分担することで、アプリケーション開発を効率的に行うことができ、各プログラムの独立性が高くなることで仕様変更にも柔軟に対応できます。<br>
<MVCの役割><br>
>**model**: アプリケーションのデータを扱う<br>
**view**: クライアントからの入力やクライアントへの出力を担う<br>
&emsp;&emsp;&emsp;(今回は上記項目のThymeleafがViewにあたります)<br>
**controller**: クライアントからの入力を受け取りmodelとviewへ指示する<br><br>

また、今回作成する上で上記以外に「service」と「repository」という役割のクラスを追加しています。
>**service**: ビジネスロジックを実行するためのメソッドを実装。<br>
**repository**: データベースを操作するためのメソッドを実装。<br>
&emsp;&emsp;&emsp;&emsp;&emsp;(今回は下記項目のMyBatisがrepositoryにあたります)<br>

図で表すとこのようになります。
<img src="img/mvc.jpg"><br>

# <a name="2.3."></a>
### 2.3. MyBatis
# <a name="2.3.1."></a>
#### 2.3.1. MyBatisとは<br>
**「[MyBatis](http://www.mybatis.org/mybatis-3/ja/)<sup>[1](#note2)</sup>」**を使用して、データベースアクセスの機能を実装しました。
<br><br>
※要変更
<sup><a name="note2">1</a></sup> 「O/Rマッパー」と呼ばれるツールの１つ。機能としてJavaのオブジェクトとデータベース操作言語のSQLの関連付けができる。<br>
そうすることでJavaの処理を実行するとそれに対応するSQLが実行できるようになる。
<br><br>
# <a name="2.3.2."></a>
#### 2.3.2. MyBatisの特徴<br>
MyBatisは他のO/Rマッピングフレームワーク(JPA)とは異なりデータベースとオブジェクトをマッピングするのではなく、
SQL文とオブジェクトのマッピングを行う。
そのため、SQLのJoin、複雑なSQLが柔軟に実装でき、Entiyの制約を受ける事なく、
少ない労力で実装ができる。<br>
また、下記に示したように、SQL内にタグを記載することによって、
動的なSQLを実装する事が可能となる。

・MyBatisの特徴的な機能<br>
①動的SQL<br>
SQL文に条件分岐や繰り返し処理など追加することでより複雑なSQL文を実行することが可能。<br>
使用できるタグは以下になります。（一部）
><if\><br>
条件分岐を追加する。検索条件を追加したりするときに使用。<br>
><choose\><br>
上記の単純な条件分岐ではなくケースごとに処理を使い分けたいときに使用。<br>
><trim\><br>
上記の条件分岐で複数の条件を指定してどれにも当てはまらない場合、WHERE句に条件が入らないなどで構文エラーが起こらないようにtriｍを使用する。
><foreach\><br>
リスト等の複数の値をIN句等と組み合わせて検索をする場合に使用する。

②resultMap<br>
SQLの実行結果を任意の項目にMappingする事が可能<br>
オブジェクト同士の名称を一致させる事なく、マッピングする事が可能となり、
SQLに合わせた、DTOを都度作成する必要がなくなる。
<br>
<br><br>
# <a name="2.3.3."></a>
#### 2.3.3. MyBatisの導入
今回その機能を実際に使用するまでの流れと実際の処理内容をご紹介します。

まずSpringBootの設定ファイルである**「application.properties」**ファイルにDataBaseアクセスのための情報を記述します。(MySQLを使用する場合)
<img src="img/MyBatis_properties.jpg">
<br><br>

次にMyBatisを使用するためにMavenのライブラリ管理ファイルである**「pom.xml」**の<dependencies\>タグ内に下記の記述を追加します。<br>
(versionは環境によって異なる場合があります)
<img src="img/MyBatis_pom.jpg">
<br><br>
これで接続のための準備は完了したので次は実際の処理を作成していきます。
<br><br>
MyBatisの処理を実装するために下記のクラス、ファイルを作成<br>
①SQL処理を呼び出すMapperインターフェースクラス<br>
②SQL文を記述するXMLファイル<br><br>
2つのファイルを以下のようにMapperフォルダ内に配置します。<br>
<img src="img/mapperlist.jpg">


掲示板サイトに実装したコードは以下になります。
<br><br>

**<UserMapper.java>**<br>
<img src="img/Mapper_if_java.jpg"><br><br>
**<UserMapper.xml>**<br>
<img src="img/Mapper_if.jpg"><br>
>・上記コードの処理説明<br>
「UserMapper.xml」のselect文内の**ifタグ(if testの部分)**を使用することで動的SQLが可能になり、<br>
パスワードの値(pass)が入っていれば検索条件を追加が可能。<br><br><br>

**<MessageMapper.java>**<br>
<img src="img/Mapper_foreach_java.jpg"><br><br>
**<MessageMapper.xml>**<br>
<img src="img/Mapper_foreach.jpg"><br>
>・上記コードの処理説明<br>
「MessageMapper.xml」のselect文内の**foreachタグ**を使用することでList型の値をに入っている値を条件として使用することができる。
<br><br>

# <a name="2.4."></a>
### 2.4. セッション管理
非機能としてセッション管理を実装しました。<br>
ログインを行っていないユーザー（セッションIDを取得していないユーザー）がログイン画面以外にアクセスした場合、強制的にログイン画面に遷移します。<br>
またこの処理を実装するにあたり「AOP(アスペクト指向プログラミング)<sup>[1](#note3)</sup>」を使用しました。<br><br>
<sup><a name="note3">1</a></sup>
「本来のプログラムの処理（掲示板の機能）」とは別に「動きを記録するロギング操作」などの共通処理をモジュール化し分離することで、把握・管理・変更を容易にする。<br>
そしてモジュール化した操作をメソッドの前後で任意に実行させることができる。
<br><br>
掲示板サイトに実装したコードは以下になります。<br>
**<LoginInterceptor.java>**<br>
<img src="img/aop_class.jpg"><br><br>
**<LoginInterceptorConfig.java>**<br>
<img src="img/aop_config.jpg"><br>
>・上記コードの処理説明<br>
「LoginInterceptor.java」でクラス名を「preHandle」とすることでcontrollerメソッドの実行前に共通処理を実行することができる。セッションを取得していない場合ログイン画面に遷移する処理を記述。<br>
「LoginInterceptorConfig.java」では処理する対象と除外する対象を設定している。
<br><br>

---

# <a name="3."></a>
## 3. まとめ
研修ではまず最初にそれぞれのスキルレベルや経験に合わせてカリキュラムが組まれるのが良かったです。<br>
そして上長が進み具合や理解度などを逐一確認していただいたおかげで2か月間の研修を終えることができました。<br>
研修の中では日々新しいことを勉強する中で理解が追い付かずついあいまいなまま進もうとしして余計に袋小路に入ってしまい大きく時間を取られてしまう状況がありました。<br>
その時に上長から「スケジュール通りに進めるのではなく、本当に理解して進めているかが重要だ」と言われ、きちんと目の前のことを理解してから進むことがなにより重要だと気づかされました。<br>
またわからないところを質問しに行った時もしっかりと時間を取ってくださり細かいところまでちゃんと理解できるところまで説明してもらうなど研修中は常に気を使ってくださりました。<br>
そうして今回2か月間の研修を行い、ほぼ未経験の自分がプログラミングの技術を身につけて最終的にWebアプリケーションを作成できるようになりました。<br>
今後はここからもっとプログラムや設計について学び、開発現場で活かして行きたいと思います。

# 最後に
この記事を見て、m/fieldに興味を持った方はm/field採用までご連絡下さい。未経験採用行っております。
